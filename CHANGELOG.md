# LLM OS 변경 로그 및 업데이트 노트

**LLM OS**는 사용자와 LLM 간의 상호작용을 극대화하고, 다양한 모델을 효율적으로 활용할 수 있도록 설계된 개인 맞춤형 운영 시스템입니다.

이 프로젝트는 [시맨틱 버저닝](https://semver.org/lang/ko/)을 따릅니다.

---

## [0.1.1] - 2025-05-30 🏗️ **아키텍처 리팩토링 및 안정성 개선**

### 🏛️ 주요 아키텍처 리팩토링
- **사이드바 로직 분리**: `core/app.py`의 복잡한 사이드바 렌더링 로직을 `ui/sidebar.py`의 독립된 `Sidebar` 클래스로 완전 분리
- **모델 데이터 외부화**: `models/model_registry.py`에 하드코딩된 AI 모델 정보를 `models/models.json` 파일로 분리하여 코드와 데이터 완전 분리
- **코드 구조 개선**: 각 파일의 역할과 책임이 명확해져 유지보수성 및 확장성 대폭 향상

### 🐛 중요 버그 수정
- **사용량 통계 표시 오류 해결**: 사이드바에서 토큰, 요청, 비용이 모두 0으로 표시되던 치명적 버그 완전 해결
  - 원인: Streamlit 재실행 시 세션 사용량 데이터 초기화 문제
  - 해결: `session_state` 활용으로 앱 재실행에도 불구하고 세션 데이터 영구 보존
- **Import 오류 해결**: `utils/__init__.py`에서 존재하지 않는 `get_app_logger` 함수 import 오류 수정
- **UI 컴포넌트 오류 해결**: `components.py`의 `render_usage_stats` 메서드에서 발생하던 `NameError` 완전 해결

### 🔧 기술적 개선사항
- **세션 상태 관리 고도화**: `UsageTracker` 클래스가 Streamlit `session_state`를 활용하여 앱 재실행에도 데이터 유지
- **JSON 기반 설정 관리**: 모델 정보 업데이트 시 소스 코드 수정 없이 JSON 파일만 편집하면 되는 구조로 개선
- **클래스 책임 분리**: `EnhancedLLMOSApp`에서 UI 렌더링 책임을 `Sidebar` 클래스로 위임하여 단일 책임 원칙 준수
- **안전한 렌더링**: `render_usage_stats` 메서드에 `try-except` 블록 추가로 오류 발생 시에도 앱 크래시 방지

### 🛡️ 안정성 강화
- **Graceful Error Handling**: UI 컴포넌트 오류 시 사용자 친화적 오류 메시지 표시
- **데이터 무결성**: 세션 사용량 데이터가 예기치 않은 앱 재시작에도 안전하게 보존
- **Import 안전성**: 모든 유틸리티 함수의 존재 여부 검증 완료

### 📁 파일 구조 개선
```
src/llmos/
├── ui/
│   ├── sidebar.py          # 🆕 사이드바 전용 클래스 (app.py에서 분리)
│   └── components.py       # 🔧 안정성 개선된 UI 컴포넌트
├── models/
│   ├── models.json         # 🆕 AI 모델 데이터 (하드코딩에서 분리)
│   └── model_registry.py   # 🔧 JSON 로더로 역할 변경
├── managers/
│   └── usage_tracker.py    # 🔧 session_state 기반 세션 관리
└── utils/
    └── logging_handler.py  # 🔧 누락된 함수 추가
```

### 🎯 향후 유지보수 편의성 개선
- **모델 추가 간소화**: 새 AI 모델 추가 시 `models.json` 파일만 수정하면 됨
- **사이드바 기능 확장**: 사이드바 관련 모든 수정은 `ui/sidebar.py`에서만 진행
- **독립적 컴포넌트**: 각 UI 컴포넌트가 독립적으로 테스트 및 수정 가능

### 🚀 성능 및 사용자 경험 개선
- **실시간 사용량 표시**: 현재 세션, 오늘, 전체 사용량이 정확하고 실시간으로 업데이트
- **일관된 사용자 인터페이스**: 사이드바 레이아웃과 기능이 더욱 일관되고 안정적
- **빠른 앱 시작**: 리팩토링된 구조로 인한 초기화 성능 개선

### 📚 개발자 경험 개선
- **명확한 코드 구조**: 각 파일과 클래스의 역할이 명확하여 새로운 기능 추가 시 어디를 수정해야 할지 직관적
- **설정 관리 간소화**: 하드코딩된 설정들이 외부 파일로 분리되어 운영 환경 관리 용이

---

## [0.1.0] - 2025-05-29 🎉 **첫 번째 안정 버전**

### 🐛 수정된 주요 버그들
- **스트리밍 테스트 실패 오류 해결**: `'NoneType' object has no attribute 'text'` 완전 해결
- **모델 설정 오류 해결**: "현재 선택된 모델 설정을 찾을 수 없습니다" 오류 완전 해결  
- **사용량 통계 레이아웃 개선**: 토큰/비용 표시 최적화로 사이드바에서 잘림 현상 해결
- **용어 개선**: "고아 파일" → "미사용 파일"로 더 직관적인 표현으로 변경

### 🚀 개선된 기능들
- **안정적인 스트리밍**: 모든 AI 제공업체(OpenAI, Anthropic, Google)에서 안정적인 스트리밍 동작
- **자동 모델 선택**: 설정이 없을 때 사용 가능한 첫 번째 모델 자동 선택
- **설정 동기화**: session_state와 settings 간 완벽한 동기화
- **향상된 UI/UX**: 더 직관적인 사용자 인터페이스 용어 및 레이아웃

### 🛡️ 안전장치 강화
- **포괄적인 None 체크**: 모든 API 응답에 대한 안전장치 구현
- **Fallback 로직**: 설정값이 없을 때 자동 복구 메커니즘
- **예외 처리 강화**: 각 제공업체별 특수 상황 대응

---

## [0.0.9] - 2025-05-28 🔧 **기능 완성**

### 추가된 주요 기능
- **🖼️ 멀티모달 지원**: 텍스트와 이미지를 함께 처리하는 완전한 멀티모달 시스템
- **⚡ 실시간 스트리밍**: AI 응답을 실시간으로 확인할 수 있는 스트리밍 기능
- **📊 사용량 추적 시스템**: 토큰 사용량과 비용을 자동으로 계산하고 추적
- **📚 아티팩트 관리**: AI가 생성한 콘텐츠를 체계적으로 저장하고 관리
- **💬 통합 채팅 입력**: 이미지 드래그&드롭을 지원하는 통합 입력 시스템

### 스마트 기능들
- **🎯 자동 제목 생성**: AI가 대화 내용을 바탕으로 채팅 제목 자동 생성
- **🔄 응답 재시도 기능**: 만족스럽지 않은 AI 응답을 다시 생성
- **✏️ 메시지 편집**: 사용자가 보낸 메시지를 수정 가능
- **📋 복사 기능**: AI 응답을 쉽게 복사할 수 있는 기능
- **🐛 디버그 페이지**: 개발자를 위한 상세한 시스템 정보
- **📤 데이터 내보내기**: 모든 채팅 기록을 JSON 형태로 다운로드

### 지원 AI 모델
- **OpenAI**: GPT-4o, GPT-4o Mini, GPT-4 Turbo
- **Anthropic**: Claude 3 Opus, Claude 3.5 Sonnet  
- **Google**: Gemini 1.5 Flash, Gemini 1.5 Pro

### 기술적 개선사항
- 완전한 모듈화 아키텍처 설계
- 전면적인 타입 힌팅 적용
- 포괄적인 에러 처리 시스템
- 체계적인 로깅 시스템 구축
- 포괄적인 테스트 코드 작성

---

**0.0.9 버전이 정말 대단한 기능들이 많이 들어간 버전이네요!** 🎉 

특히 **멀티모달 지원**과 **실시간 스트리밍** 같은 고급 기능들까지 구현하셨다니... 정말 인상적이에요! 😊

---

## [0.0.5] - 2025-05-28 🧠 **대화 기억 및 안정성 강화**

### 🧠 대화 내용 기억 시스템
- **채팅 히스토리 기능**: LLM OS가 이전 대화 내용을 기억하고 맥락을 파악
- **일관성 있는 답변**: 문맥에 맞는 연속적인 대화 지원
- **메시지 목록 처리**: 단일 프롬프트에서 전체 대화 기록 처리로 업그레이드

### 🔧 핵심 아키텍처 업데이트
- **LLMInterface 개선**: 메시지 목록 기반 처리 방식으로 전환
- **제공업체별 인터페이스 업그레이드**: OpenAI, Anthropic, Google 인터페이스 모두 대화 기록 지원
- **EnhancedModelManager 확장**: 새로운 메시지 처리 방식 완전 지원
- **API 메시지 변환**: `_prepare_api_messages` 헬퍼 함수로 형식 변환 자동화

### 🛠️ 안정성 개선
- **API 키 저장 알림 문제 완전 해결**: `st.session_state.pending_toast_message` 방식으로 안정적 알림
- **견고한 API 연동**: 멀티모달 콘텐츠 및 시스템 프롬프트 처리 로직 강화
- **컨텍스트 윈도우 관리**: 대화 기록 길이 제한 자동 적용

---

## [0.0.4] - 2025-05-28 🎛️ **모델 관리 방식 정교화**

### 📋 고정 모델 목록 시스템
- **ModelRegistry 업데이트**: Google, OpenAI, Anthropic의 특정 모델 목록 하드코딩
- **사용자 피드백 반영**: 더 예측 가능하고 안정적인 모델 선택 환경

### 🎨 UI 개선
- **간결한 제공자 선택**: API 키 설정 여부와 관계없이 모든 제공자 표시
- **명확한 사용 조건**: 실제 사용 시에만 유효한 API 키 필요 안내

---

## [0.0.3] - 2025-05-28 🎨 **UI 및 사용성 개선**

### 🔑 스마트 모델 선택 (초기 시도)
- **API 키 기반 필터링**: 설정된 API 키를 감지하여 사용 가능한 모델만 표시하는 초기 기능
- **동적 UI 업데이트**: 모델 드롭다운이 API 키 상태에 따라 동적 변경

### 💬 사용자 경험 개선
- **API 키 저장 알림 개선 (1차)**: 확인 메시지 표시 시간 문제 해결을 위한 첫 번째 시도
- **이미지 업로드 UI 간소화**: 채팅 입력창 근처로 이동하여 사용 편의성 향상
- **인터페이스 정리**: 더욱 간결하고 직관적인 UI 구성

---

## [0.0.2] - 2025-05-28 🔧 **기능 강화 및 통합**

### 🏗️ 핵심 시스템 통합
- **코어 모듈 통합 및 확장**: v0.0.1의 기초 기능들을 실용적으로 연결
- **계층적 모델 선택**: 다양한 제공자의 모델을 체계적으로 관리하는 ModelRegistry 도입

### 🎨 출력 및 렌더링 개선
- **OutputRenderer 도입**: LLM 응답(코드 블록, 마크다운)을 깔끔하게 표시
- **이미지 업로드 UI**: 사용자가 이미지를 업로드하고 LLM과 상호작용할 수 있는 초기 인터페이스

### 🤖 다중 LLM 지원
- **3대 제공업체 연동**: OpenAI, Anthropic, Google 등 주요 LLM 제공자 통합
- **EnhancedModelManager**: 모델 간 전환과 관리를 효과적으로 처리하는 고급 관리자 도입

---

## [0.0.1] - 2025-05-28 🌱 **코어 모듈 탄생**

### 🏛️ 기반 아키텍처 구축
- **핵심 데이터 구조 정의**: `Artifact`, `ModelProvider`, `ModelConfig` 등 프로젝트의 DNA가 되는 기본 클래스들
- **견고한 설정 관리**: API 키, 파일 경로 등을 안전하게 관리하는 SettingsManager 기반 마련

### 📚 콘텐츠 관리 시스템
- **ArtifactManager 기초**: 생성된 텍스트, 코드, 이미지 등을 저장하고 검색하는 시스템의 토대
- **LLM 인터페이스 설계**: 다양한 AI 모델과 연동하기 위한 확장 가능한 인터페이스 구조

### 🖥️ UI 기반 구축
- **Streamlit 앱 뼈대**: 사용자가 상호작용할 수 있는 기본적인 웹 인터페이스 구성
- **모듈형 설계**: 향후 기능 확장을 고려한 계층적 코드 구조

---

## 📋 버전 정책 및 변경 사항 유형

### 버전 번호 체계
- **주 버전** (X.0.0): 호환성을 깨는 중대한 변경
- **부 버전** (0.X.0): 새로운 기능 추가 (하위 호환성 유지)
- **패치 버전** (0.0.X): 버그 수정 및 소규모 개선

### 변경 사항 분류
- **🎉 추가됨**: 새로운 기능이나 개선사항
- **🔧 변경됨**: 기존 기능의 동작 방식 변경
- **🗑️ 폐기예정**: 향후 제거될 예정인 기능
- **❌ 제거됨**: 완전히 제거된 기능
- **🐛 수정됨**: 버그 수정 및 안정성 개선
- **🛡️ 보안**: 보안 관련 수정사항

---

## 🚀 향후 계획 (로드맵)

### 단기 목표
- **복사 기능 개선**: 더 편리한 복사 옵션
- **재출력 기능 확장**: 다양한 재시도 옵션
- **자동 채팅 로그 저장**: 백그라운드 자동 저장

### 중기 목표  
- **프롬프트 템플릿 시스템**: 재사용 가능한 프롬프트 관리
- **고급 검색 및 필터링**: 채팅 기록 내 강력한 검색
- **데이터 백업 시스템**: 클라우드 동기화 지원

### 장기 목표
- **플러그인 시스템**: 서드파티 확장 지원
- **협업 기능**: 팀 내 채팅 공유
- **고급 분석**: 사용 패턴 분석 및 인사이트

---

## 💡 개발 노트

LLM OS는 개인 학습 및 연구 목적으로 개발된 프로젝트입니다.

### 🎯 개발 철학
- **사용자 중심 설계**: 실제 사용 경험을 바탕으로 한 지속적인 개선
- **안정성 우선**: 철저한 테스트와 단계별 검증을 통한 안정적인 기능 제공
- **학습 중심**: 새로운 기술과 패턴을 배우고 적용하는 실험 공간

### 📚 기술 스택 & 학습 포인트
- **Python**: 모던 Python 패턴과 타입 힌팅
- **Streamlit**: 빠른 프로토타이핑과 사용자 인터페이스
- **AI API 통합**: 다양한 AI 제공업체와의 안정적인 연동
- **아키텍처 설계**: 확장 가능하고 유지보수 가능한 코드 구조

---

*LLM OS - 당신의 AI 경험을 한 단계 업그레이드합니다* ✨